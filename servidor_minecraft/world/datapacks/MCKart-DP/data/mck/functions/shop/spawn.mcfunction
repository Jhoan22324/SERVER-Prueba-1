execute store result score @s mck_goods_id run data get block ~ 24 ~ Items[0].tag.good_id
scoreboard players operation in mck_db_bit = @s mck_goods_id
function mck:database/good_find
summon item_display ~ ~1 ~ {Tags:["mck_shop_item"],brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,0.8f,0f],scale:[1f,1f,1f]},teleport_duration:2,item:{id:"minecraft:air",Count:1b},item_display:"head"}
execute if data storage databases {output:{data:{group:7b}}} run data modify entity @e[tag=mck_shop_item,type=item_display,limit=1,sort=nearest] item_display set value "fixed"
execute if data storage databases {output:{data:{group:3b}}} run data modify entity @e[tag=mck_shop_item,type=item_display,limit=1,sort=nearest] item_display set value "fixed"
execute unless data storage databases {output:{data:{group:8b}}} run data modify entity @e[tag=mck_shop_item,type=item_display,limit=1,sort=nearest] item.id set from storage databases output.data.icon.id
execute unless data storage databases {output:{data:{group:8b}}} run data modify entity @e[tag=mck_shop_item,type=item_display,limit=1,sort=nearest] item.tag set from storage databases output.data.icon.tag

execute if data storage databases {output:{data:{group:8b}}} store result score @e[tag=mck_shop_item,type=item_display,limit=1,sort=nearest] mck_trail run data get storage databases output.data.icon.tag.CustomModelData



summon text_display ~ ~2 ~ {billboard:"vertical",alignment:"center",line_width:1000,Tags:["mck_shop_text"],brightness:{sky:15,block:15},transformation:{left_rotation:[0f,0f,0f,1f],right_rotation:[0f,0f,0f,1f],translation:[0f,1f,0f],scale:[1f,1f,1f]},text:'[{"text":"No Data Found","color":"white","bold":true,"italic":false},{"text":"\\n"},{"text":"No Data Found","color":"gray","bold":false,"italic":false},{"text":"\\n"},{"text":"No Data Found","color":"gray","bold":false,"italic":false},{"text":"\\n\\n"},{"text":"\\uaac0","bold":false,"italic":false},{"text":"\\n\\n"},{"text":"No Data Found","color":"red","bold":true,"italic":false}]',background:0}
execute store result score number mck_temp run data get storage databases output.data.price
execute store result score currency mck_temp run data get storage databases output.data.currency
#function mck:shop/make_number


execute if data storage databases {output:{data:{amount:-1}}} run data modify storage temp in_stock set value []
execute unless data storage databases {output:{data:{amount:-1}}} run data modify storage temp in_stock set value ['{"text":"  "}','{"nbt":"output.data.amount","storage":"databases","color":"#FFC591","bold":true,"italic":false}','{"translate":"shop.in_stock","color":"#E6EDC3","bold":true,"italic":false}']


execute if data storage databases {output:{data:{currency:0b}}} if data storage databases {output:{data:{sale:0}}} run data modify entity @e[tag=mck_shop_text,limit=1,sort=nearest,type=text_display] text set value '[{"text":""},{"nbt":"output.data.icon.tag.display.Name","storage":"databases","interpret":true,"font":"font1","bold":false},{"nbt":"in_stock[]","storage":"temp","interpret":true,"separator":""},{"text":"\\n\\n"},{"nbt":"output.data.icon.tag.display.Lore[0]","storage":"databases","interpret":true,"color":"white"},{"text":"\\n"},{"nbt":"output.data.icon.tag.display.Lore[1]","storage":"databases","interpret":true,"color":"white"},{"text":"\\n\\n"},{"score":{"name":"number","objective":"mck_temp"},"font":"font1","color":"#FFE878","bold":false,"italic":false},{"text":" \\uaae2"},{"text":"\\n\\n"},{"translate":"shop.coins","color":"#FFE878","bold":true,"italic":false}]'
execute if data storage databases {output:{data:{currency:0b}}} unless data storage databases {output:{data:{sale:0}}} run data modify entity @e[tag=mck_shop_text,limit=1,sort=nearest,type=text_display] text set value '[{"text":""},{"nbt":"output.data.icon.tag.display.Name","storage":"databases","interpret":true,"font":"font1","bold":false},{"nbt":"in_stock[]","storage":"temp","interpret":true,"separator":""},{"text":"\\n\\n"},{"nbt":"output.data.icon.tag.display.Lore[0]","storage":"databases","interpret":true,"color":"white"},{"text":"\\n"},{"nbt":"output.data.icon.tag.display.Lore[1]","storage":"databases","interpret":true,"color":"white"},{"text":"\\n\\n"},{"score":{"name":"number","objective":"mck_temp"},"font":"font1","color":"#FFE878","bold":false,"italic":false},{"text":" \\uaae2"},{"text":" -","color":"#FF3E30","bold":true},{"nbt":"output.data.sale","storage":"databases","color":"#FF3E30","bold":true},{"text":"","color":"#FF3E30","bold":true},{"text":"\\uaae0"},{"translate":"shop.on_sale","color":"#FF3E30","bold":true},{"text":"\\n\\n"},{"translate":"shop.coins","color":"#FFE878","bold":true,"italic":false}]'

execute if data storage databases {output:{data:{currency:1b}}} if data storage databases {output:{data:{sale:0}}} run data modify entity @e[tag=mck_shop_text,limit=1,sort=nearest,type=text_display] text set value '[{"text":""},{"nbt":"output.data.icon.tag.display.Name","storage":"databases","interpret":true,"font":"font1","bold":false},{"nbt":"in_stock[]","storage":"temp","interpret":true,"separator":""},{"text":"\\n\\n"},{"nbt":"output.data.icon.tag.display.Lore[0]","storage":"databases","interpret":true,"color":"white"},{"text":"\\n"},{"nbt":"output.data.icon.tag.display.Lore[1]","storage":"databases","interpret":true,"color":"white"},{"text":"\\n\\n"},{"score":{"name":"number","objective":"mck_temp"},"font":"font1","color":"#FF8C69","bold":false,"italic":false},{"text":" \\uaae3"},{"text":"\\n\\n"},{"translate":"shop.kart_fragments","color":"#FF8C69","bold":true,"italic":false}]'
execute if data storage databases {output:{data:{currency:1b}}} unless data storage databases {output:{data:{sale:0}}} run data modify entity @e[tag=mck_shop_text,limit=1,sort=nearest,type=text_display] text set value '[{"text":""},{"nbt":"output.data.icon.tag.display.Name","storage":"databases","interpret":true,"font":"font1","bold":false},{"nbt":"in_stock[]","storage":"temp","interpret":true,"separator":""},{"text":"\\n\\n"},{"nbt":"output.data.icon.tag.display.Lore[0]","storage":"databases","interpret":true,"color":"white"},{"text":"\\n"},{"nbt":"output.data.icon.tag.display.Lore[1]","storage":"databases","interpret":true,"color":"white"},{"text":"\\n\\n"},{"score":{"name":"number","objective":"mck_temp"},"font":"font1","color":"#FF8C69","bold":false,"italic":false},{"text":" \\uaae3"},{"text":" -","color":"#FF3E30","bold":true},{"nbt":"output.data.sale","storage":"databases","color":"#FF3E30","bold":true},{"text":"","color":"#FF3E30","bold":true},{"text":"\\uaae1"},{"translate":"shop.on_sale","color":"#FF3E30","bold":true},{"text":"\\n\\n"},{"translate":"shop.kart_fragments","color":"#FF8C69","bold":true,"italic":false}]'



summon interaction ~ ~1 ~ {width:2.4f,height:2f,Tags:["mck_shop_interaction"]}
scoreboard players operation @e[tag=mck_shop_interaction,limit=1,sort=nearest] mck_goods_id = @s mck_goods_id